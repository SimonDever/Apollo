<div class="list-view" @fadeInOut>
	<div class="entry-list" *ngIf="config && !config.tableFormat">
<!-- 
		<div style="position: fixed; height: 300px; width: 300px; overflow: scroll; bottom: 0; left: 0; color: white; background: #444">
			{{ scroll.viewPortItems | json }}
		</div> -->
		<!-- <div class="scrollable-content"> -->
		<div class="scroll-viewport">
			<!--  class="virtual-scroller" -->
		<!-- <virtual-scroller #scroll [items]="entries$ | async" [calculateDimensionsAutomatically]="true"> -->
			<!-- <div *uiScroll="let entry of datasource" -->
			<div *ngFor="let entry of entries$ | async; trackBy: trackById" class="entry-box" [id]="'entry-' + entry.id"
				[class.selected]="selectedEntryId === entry.id"
				[class.hide-touched]="entry.touched && config.showOnlyUntouched"
				[class.untouched]="!entry.touched && config.untouchedHighlight"
				(click)="toggleActions($event, entry)">
				<div class="poster-preview">
					<img *ngIf="entry.poster_path else missingPoster"	class="entry-poster" id="poster-{{entry.id}}"	[src]="getPosterSrc(entry)" /><!-- posterCache.get(entry.poster_path).src -->
					<ng-template #missingPoster><div class="entry-poster missing-poster-icon" [color]="'#ccc'" octicon="question"></div></ng-template>
				</div>
				<div class="entry-actions">
					<div class="entry-title">
						{{ entry.title }}
						<span *ngIf="config.addYear && entry.year">({{ entry.year }})</span>
						<span *ngIf="config.addYear && !entry.year && entry.release_date">({{ entry.release_date | date: 'yyyy' }})</span>
					</div>
					<div class="entry-blurb">{{ entry.overview }}</div>
					<div class="icon-button-box-horizontal">
						<button octicon="trashcan" class="icon-button trash-button"
							(click)="showDeleteConfirmation($event, deleteModal, entry)"></button>
						<button octicon="pencil" class="icon-button edit-button" (click)="edit($event, entry)"></button>
						<button octicon="play" class="icon-button play-button" (click)="play($event, entry)"></button>
					</div>
				</div>
			</div>
		<!-- </virtual-scroller> -->
		</div>
	</div>

	<!-- <div class="table-wrapper" *ngIf="config && config.tableFormat">
		<table class="table table-fixed">
			<thead>
				<tr>
					<th scope="col">Title</th>
					<th scope="col">Year</th>
					<th scope="col">Overview</th>
					<th scope="col">Actions</th>
				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let entry of (entries$ | async)" [class.hide-touched]="entry.touched && config.showOnlyUntouched"
					[class.untouched]="!entry.touched && config.untouchedHighlight">
					<td class="title-cell">{{ entry.title }}</td>
					<td>{{ entry.year || entry.release_date | date: 'yyyy' }}</td>
					<td>{{ entry.overview }}</td>
					<td>
						<div class="icon-button-box-horizontal">
							<button octicon="check" class="icon-button confirm-button" *ngIf="!entry.touched"
								(click)="touch($event, entry)"></button>
							<button octicon="trashcan" class="icon-button trash-button"
								(click)="showDeleteConfirmation($event, deleteModal, entry)"></button>
							<button octicon="pencil" class="icon-button edit-button"
								(click)="edit($event, entry)"></button>
							<button octicon="play" class="icon-button play-button"
								(click)="play($event, entry.file)"></button>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
	</div> -->
</div>

<ng-template #deleteModal let-modal>
	<div class="modal-header">
		<h4 class="modal-title" id="modal-basic-title">Confirm deletion</h4>
		<button type="button" class="close" data-dismiss="modal" (click)="closeDeleteModal($event, 'close')" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>
	<div class="modal-body">
		<p>Are you sure you want to delete this entry?</p>
		<p class="text-danger"><strong>This operation cannot be undone.</strong></p>
	</div>
	<div class="modal-footer">
		<button ngbAutofocus type="button" class="btn btn-outline-light" (keyup.enter)="closeDeleteModal($event, 'cancel')" (click)="closeDeleteModal($event, 'cancel')">Cancel</button>
		<button type="button" class="btn btn-danger" (keyup.enter)="closeDeleteModal($event, 'delete')" (click)="closeDeleteModal($event, 'delete')">Delete</button>
	</div>
</ng-template>
